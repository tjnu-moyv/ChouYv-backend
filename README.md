# 丑鱼外卖需求和流程

* 通过一个登录和注册页面进入(不同账号进入不同的页面)

## 学生用户页面(通过注册学生用户账号登录进入用户页面)

* 主导航栏两个内容(点餐和配送员)

### 配送员页面布局

* 左上角有头像可进入个人信息页面
* 第一次进入配送员页面需要填写一些承诺内容,并交押金
* 之后进入配送页面就显示一条条的所有订单(订单内容有餐厅名称和配送地址)可点击每个订单右边的抢单按钮可以抢单(
  点击抢单后进入订单详情页面)

### 订单详情页面布局

* 若商家配餐完成将会出现弹窗提醒配餐完成
* 左上角有头像可进入个人信息页面
* 显示订单的每个菜品内容,商家地址和用户地址
* 配送员到地之后检查无误之后点击订单下方的收餐
* 配送员送到用户手里之后点击确认交付给用户的按钮,在一个小时之后费用将会分别给配送员和商家

### 点餐页面布局布局

* 左上角有头像可进入个人信息页面
* 左侧分级导航栏(element折叠面板类型形式)可以选择用餐地址楼层, 选择之后出现那一楼层的餐厅信息
* 在最上面的主导航栏下面有搜索框(element带建议输入框, 并且可删除, 再加上选择器), 可搜索餐品类型或者餐厅名称,
  并且可以在搜索框左侧选择搜索范围
* 中间部分若没有任何选择和搜索显示推荐菜品, 若通过左侧导航栏选择餐厅地址和楼层将会取消推荐菜品位置出现那一楼层餐品,
  若有搜素内容只会在搜索的下拉菜单里面不会取代中间部分内容

### 菜品选择页面布局(点击商家之后进入)

* 左上角有头像可进入个人信息页面
* 左侧分级导航栏(element折叠面板类型形式, 或者树形控件类型), 选择不同种类商品(例如：荤、素等)
* 在最上面的主导航栏下面有搜索框(element带建议输入框, 并且可删除, 在加上选择器), 可搜索菜品名称, 并且可以在搜索框左侧选择搜索范围
* 中间为点击导航栏不同商品的信息和图片, 在菜品名字后面加上菜品剩余量 ,可以点击加入购物车, 购物车图标左上角数量+1
* 右下角购物车图标, 点击出现购物车里菜品弹窗, 点击确认之后进入支付页面

### 支付和确认订单页面布局(点击购物车确认按键之后进入)

* 左上角有头像可进入个人信息页面
* 上方三个单选框(堂食, 外带和配送), 点击堂食默认加入打包费, 点击外带默认加入配送费
* 下面为订单内容, 第一条可选择就餐时间(若点击配送第二行可选择配送地址或者新建地址, 新建地址跳转到个人信息页面)
* 订单内容之后最下面确认支付按钮(点击完之后进入订单信息页面)

### 订单信息页面布局(点击确认支付之后进入)

* 左上角有头像可进入个人信息页面
* 显示时间, 就餐地址(若配送显示配送地址和时间), 和所有商品内容, 以及价钱
* 最下方有取消订单和确认收餐(在配餐之前可以取消, 配餐之后取消需要罚款)

### 个人信息页面布局(点击右上角头衔之后进入)

* 大体内容为表单(element中的表单)信息包括:头像,昵称,修改收货地址和添加收获地址(其中收货地址也绑定电话),设置按钮(
  点击之后进入设置界面)
* 如果用户注册了配送员可以有取消配送员身份并且退还押金按钮

### 设置页面布局(点击个人信息界面的设置按钮之后进入)

* 显示用户名密码和修改用户名密码

## 商家页面(通过公司给商家的账号登录进入商家页面,商家不可以私自注册)

* 主导航栏三个内容(今日配餐、订单和添加删除菜品)

### 今日配餐页面布局

* 可以选择早中晚,并且加入不同菜品和添加菜品数量(element穿梭框),每次有人下单这一菜品将会减一,
  并且这一选项可以随时调整在任何时间,将会同步到用户查看的餐品那边显示餐品剩余量

### 订单页面布局

* 显示订单号和菜品内容和分量
* 配餐完成之后可以点击订单右侧的配餐完成, 将会通知配送员取餐, 配送员确定收餐后这个订单取消

### 添加和删除菜品界面页面布局

* 下面有添加过的菜品和分类, 页面参考用户查看商家的菜品页面, 上传图片和输入框,
  点击确认之后菜品出现在下面可以拖动到不同的组里(新添加的默认在最上面，之后可以拖动到任何组里)
* 也可以点击之前的商品进行修改商品的照片和文案

## 管理员页面(通过公司账号登录)

* 主导航栏三个内容(学生信息、商家信息和管理员信息)

### 学生信息页面布局

* 可以查看到每个学生的订单内容，并且可以通过学生用户名搜索这个学生最近订单

### 商家信息页面布局

* 可以添加商家，点击添加商家输入商家用户名和密码
* 也可以搜索商家查看商家的菜品内容，可以点击菜品内容进行提醒违规发送给商家让其修改

# 丑鱼外卖数据库文档

## 用户表 (User)

* 用户ID (UserID)
* 用户名 (Username)
* 密码 (Password)
* 头像 (Avatar)
* 角色 (Role)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)

## 学生用户表 (StudentUser)

* 学生用户ID (StudentUserID)
* 用户ID (User.ID)
* 学生姓名 (StudentName)
* 学生学号 (StudentID)
* 学生地址 (StudentAddress)
* 手机号码 (PhoneNumber)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)

# 配送员表 (DeliveryStaff)

* 配送员ID (DeliveryStaffID)
* 用户ID (User.ID)
* 配送员姓名 (DeliveryStaffName)
* 押金 (Deposit)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)

# 商家表 (Merchant)

* 商家ID (MerchantID)
* 用户名 (Username)
* 密码 (Password)
* 商家名称 (MerchantName)
* 商家地址 (MerchantAddress)
* 商家电话 (MerchantPhoneNumber)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)

# 菜品表 (Dish)

* 菜品ID (DishID)
* 商家ID (Merchant.ID)
* 菜品名称 (DishName)
* 菜品价格 (Price)
* 菜品描述 (Description)
* 菜品图片 (Image)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)

# 订单表 (Order)

* 订单ID (OrderID)
* 订单时间 (OrderTime)
* 订单金额 (TotalAmount)
* 支付状态 (PaymentStatus)
* 支付时间 (PaymentTime)
* 配送地址 (DeliveryAddress)
* 就餐地址 (DiningAddress)
* 配送员ID (DeliveryStaffID)
* 学生用户ID (StudentUserID)
* 商家ID (MerchantID)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)

# 订单菜品表 (OrderDish)

* 订单ID (OrderID)
* 菜品ID (DishID)
* 菜品数量 (Quantity)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)

# 管理员表 (Admin)

* 管理员ID (AdminID)
* 用户名 (Username)
* 密码 (Password)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)

# 支付信息表 (PaymentInfo)

* 支付信息ID (PaymentInfoID)
* 用户ID (UserID)
* 支付密码 (PaymentPassword)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)

# 付款记录表 (PaymentRecord)

* 付款记录ID (PaymentRecordID)
* 订单ID (OrderID)
* 付款金额 (PaymentAmount)
* 付款时间 (PaymentTime)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)

# 退款记录表 (RefundRecord)

* 退款记录ID (RefundRecordID)
* 订单ID (OrderID)
* 退款金额 (RefundAmount)
* 退款时间 (RefundTime)
* 创建时间 (created_at)
* 修改时间 (updated_at)
* 是否删除 (is_deleted)